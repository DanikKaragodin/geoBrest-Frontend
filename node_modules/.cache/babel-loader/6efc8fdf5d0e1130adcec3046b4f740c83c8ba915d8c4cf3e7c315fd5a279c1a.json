{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danik\\\\inform_kurs\\\\src\\\\Components\\\\Inform.jsx\",\n  _s = $RefreshSig$();\n//import { Text, StyleSheet, View } from 'react-native'\nimport React, { Component, useContext, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport \"../Styles/main.css\";\nimport { DriverContext } from './Contexts/driverContext';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Inform() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    Driver,\n    updateValues\n  } = useContext(DriverContext);\n  useEffect(() => {\n    console.log(\"subcribe\");\n    subscribe();\n  }, []);\n  function WorkStatus() {\n    if (Driver.is_sleeping) {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"info-main-h1\",\n        children: \"\\u0412\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u0441\\u043F\\u0438\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 14\n      }, this);\n    }\n    if (Driver.is_breaking) {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"info-main-h1\",\n        children: \"\\u0412\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u043E\\u0442\\u0434\\u044B\\u0445\\u0430\\u0435\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"info-main-ul\",\n      id: \"info-main-ul\",\n      children: Driver.currentPath.map((stopOver, index) => {\n        if (index >= Driver.indexStopOver) return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"info-main-li\",\n          id: \"info-main-li\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"info-main-li-stopover\",\n            children: stopOver\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"info-main-li-count\",\n            children: [Driver.stopOversSizes[index], \" \\u0447\\u0435\\u043B.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 11\n          }, this)]\n        }, stopOver + index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n  async function subscribe() {\n    try {\n      if (!Driver.token) return false;\n      const {\n        data\n      } = await axios.get('http://localhost:4444/info', {\n        headers: {\n          Authorization: `Bearer ${Driver.token}`\n        }\n      });\n      updateValues({\n        hours: data.Info[0].hours,\n        minutes: data.Info[0].minutes,\n        seconds: data.Info[0].seconds,\n        koef: data.Info[0].koef,\n        indexStopOver: data.Info[1].indexStopOver,\n        is_recursive: data.Info[1].is_recursive,\n        is_breaking: data.Info[1].is_breaking,\n        breaking_in_min: data.Info[1].breaking_in_min,\n        is_sleeping: data.Info[1].is_sleeping,\n        sizeOfPaths: data.Info[1].sizeOfPaths,\n        currentPath: data.Info[1].currentPath,\n        passengersSize: data.Info[1].PassengersIndexes.length,\n        stopOversSizes: data.Info[2]\n      });\n      setTimeout(() => {\n        subscribe();\n      }, 1000 / Driver.koef);\n    } catch (e) {\n      setTimeout(() => {\n        subscribe();\n      }, 1000 / Driver.koef);\n    }\n  }\n  function Exit() {\n    console.log('Exit');\n    localStorage.removeItem(\"token\");\n    navigate(\"/login\");\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"info-div\",\n    id: \"info-div\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-header-div-imgName\",\n        id: \"info-header-div-imgName\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"info-header-count\",\n          id: \"info-header-name\",\n          children: Driver.fullname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-header-count\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"info-header-count-p\",\n          id: \"info-header-count-p\",\n          children: [\" \\u0422\\u0430\\u043A\\u0441\\u0438 \\u2116\", Driver.busId, \" | \\u0417\\u0430\\u043D\\u044F\\u0442\\u043E\\u0441\\u0442\\u044C: \", Driver.passengersSize, \"/\", Driver.max_passengers, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-header-count\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"info-header-count-p\",\n          id: \"info-header-count-time\",\n          children: [\" \", Driver.hours, \" : \", Driver.minutes, \" : \", Driver.seconds, \" , \", Driver.koef, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-main\",\n      children: /*#__PURE__*/_jsxDEV(WorkStatus, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-main\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: Exit,\n        className: \"info-main-button\",\n        children: \" \\u0412\\u044B\\u0439\\u0442\\u0438 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n_s(Inform, \"mevJUJMIGHm5jczkrUCScdfDGJY=\", false, function () {\n  return [useNavigate];\n});\n_c = Inform;\nvar _c;\n$RefreshReg$(_c, \"Inform\");","map":{"version":3,"names":["React","Component","useContext","useEffect","useNavigate","DriverContext","axios","jsxDEV","_jsxDEV","Inform","_s","navigate","Driver","updateValues","console","log","subscribe","WorkStatus","is_sleeping","className","children","fileName","_jsxFileName","lineNumber","columnNumber","is_breaking","id","currentPath","map","stopOver","index","indexStopOver","stopOversSizes","token","data","get","headers","Authorization","hours","Info","minutes","seconds","koef","is_recursive","breaking_in_min","sizeOfPaths","passengersSize","PassengersIndexes","length","setTimeout","e","Exit","localStorage","removeItem","fullname","busId","max_passengers","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Danik/inform_kurs/src/Components/Inform.jsx"],"sourcesContent":["//import { Text, StyleSheet, View } from 'react-native'\r\nimport React, { Component,useContext,useEffect } from 'react'\r\nimport {useNavigate} from 'react-router-dom';\r\nimport \"../Styles/main.css\";\r\nimport { DriverContext } from './Contexts/driverContext';\r\nimport axios from 'axios';\r\nexport default function Inform()  {\r\n  const navigate = useNavigate();\r\n  const {Driver, updateValues} = useContext(DriverContext);\r\n  useEffect(() => {\r\n    console.log(\"subcribe\");\r\n    subscribe();\r\n  }, [])\r\n  function WorkStatus(){\r\n    if(Driver.is_sleeping){\r\n      return <h1 className=\"info-main-h1\">Водитель спит</h1>\r\n    }\r\n    if(Driver.is_breaking){\r\n      return <h1 className=\"info-main-h1\">Водитель отдыхает</h1>\r\n    }\r\n    return (\r\n      <ul className=\"info-main-ul\" id=\"info-main-ul\">\r\n      {Driver.currentPath.map((stopOver,index) => {\r\n        if(index >= Driver.indexStopOver)\r\n        return(\r\n          <li key={stopOver+index} className=\"info-main-li\" id=\"info-main-li\"> \r\n          <p id=\"info-main-li-stopover\">{stopOver}</p>\r\n          <p id=\"info-main-li-count\">{Driver.stopOversSizes[index]} чел.</p>\r\n          </li>);\r\n      })}\r\n    </ul>\r\n    )\r\n  }\r\n  async function subscribe(){\r\n    try {\r\n        if(!Driver.token) return false\r\n        const {data} = await axios.get('http://localhost:4444/info',\r\n        {headers: {Authorization: `Bearer ${Driver.token}`}}\r\n        )\r\n        updateValues({\r\n          hours: data.Info[0].hours,\r\n          minutes: data.Info[0].minutes,\r\n          seconds: data.Info[0].seconds,\r\n          koef: data.Info[0].koef,\r\n          indexStopOver: data.Info[1].indexStopOver,\r\n          is_recursive: data.Info[1].is_recursive,\r\n          is_breaking: data.Info[1].is_breaking,\r\n          breaking_in_min: data.Info[1].breaking_in_min,\r\n          is_sleeping: data.Info[1].is_sleeping,\r\n          sizeOfPaths: data.Info[1].sizeOfPaths,\r\n          currentPath: data.Info[1].currentPath,\r\n          passengersSize: data.Info[1].PassengersIndexes.length,\r\n          stopOversSizes: data.Info[2],\r\n        });\r\n        setTimeout(() => {\r\n           subscribe();\r\n        }, (1000/Driver.koef));\r\n        \r\n    } catch (e) {\r\n        setTimeout(() => {\r\n            subscribe();\r\n        }, (1000/Driver.koef))\r\n    }\r\n  }\r\n  function Exit(){\r\n    console.log('Exit');\r\n    localStorage.removeItem(\"token\");\r\n    navigate(\"/login\");\r\n  }\r\n  return (\r\n        <div className=\"info-div\" id=\"info-div\">\r\n        <div className=\"info-header\">\r\n          <div className=\"info-header-div-imgName\"id=\"info-header-div-imgName\">\r\n          \r\n          <p className=\"info-header-count\" id=\"info-header-name\">{Driver.fullname}</p>\r\n          \r\n          </div>\r\n          <div className=\"info-header-count\">\r\n            <p className=\"info-header-count-p\" id=\"info-header-count-p\"> Такси №{Driver.busId} | Занятость: {Driver.passengersSize}/{Driver.max_passengers} </p>\r\n          </div>\r\n          <div className=\"info-header-count\">\r\n            <p className=\"info-header-count-p\" id=\"info-header-count-time\"> {Driver.hours} : {Driver.minutes} : {Driver.seconds} , {Driver.koef} </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"info-main\">\r\n          <WorkStatus/>\r\n        </div>\r\n        <div className='info-main'>\r\n              <button onClick={Exit} className='info-main-button'> Выйти </button>\r\n        </div>\r\n      </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}